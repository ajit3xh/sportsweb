{% extends 'base.html' %}

{% block content %}
<div class='bg-light dark:bg-dark min-h-screen py-12'>
    <div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>

        <div class='text-center mb-16 fade-in-up'>
            <h2 class='text-4xl font-extrabold text-dark dark:text-white tracking-tight mb-4'>Membership Plans</h2>
            <p class='text-lg text-slate-500 dark:text-slate-400 max-w-2xl mx-auto'>Choose the perfect membership plan for your needs. Enjoy unlimited bookings and exclusive discounts.</p>
        </div>

        {% if active_membership %}
        <div class='max-w-xl mx-auto mb-12 fade-in-up'>
            <div class='bg-gradient-to-r from-green-500/10 to-emerald-500/10 dark:from-green-900/30 dark:to-emerald-900/30 border border-green-500/30 rounded-2xl p-6 text-center'>
                <div class='flex items-center justify-center gap-2 mb-2'>
                    <span class='w-3 h-3 bg-green-500 rounded-full animate-pulse'></span>
                    <span class='text-green-600 dark:text-green-400 font-bold text-sm uppercase tracking-wide'>Active Membership</span>
                </div>
                <!-- Removed category name, just showing duration -->
                <p class='text-xl font-bold text-dark dark:text-white'>{{ active_membership.membership_tier.display_duration }} Plan</p>
                <p class='text-sm text-slate-500 dark:text-slate-400 mt-1'>Valid till {{ active_membership.end_date|date:'d M Y' }}</p>
            </div>
        </div>
        {% endif %}

        <div class='grid grid-cols-1 md:grid-cols-3 gap-8 mb-16 fade-in-up'>

            <!-- Monthly -->
            <div class='bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-2xl transition-all h-full flex flex-col'>
                <div class='bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white text-center'>
                    <h3 class='text-2xl font-bold'>1 Month</h3>
                    <p class='text-blue-100 text-sm mt-1'>Short Term Access</p>
                </div>
                <div class='p-6 space-y-4 flex-grow'>
                    {% for tier in monthly_tiers %}
                    <div class='p-4 rounded-xl border transition-colors {% if tier.status == 'active' %}bg-green-50 dark:bg-green-900/20 border-green-500 ring-2 ring-green-500/20{% else %}bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600 hover:border-primary{% endif %}'>
                        <div class='flex justify-between items-center'>
                            <div>
                                <p class='font-bold text-xl text-dark dark:text-white'>{{ tier.display_duration }}</p>
                                {% if tier.status == 'active' %}
                                <span class='inline-block px-2 py-1 mt-1 text-xs font-bold text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-300 rounded'>Active</span>
                                {% endif %}
                            </div>
                            <div class='text-right'>
                                <p class='text-3xl font-black text-primary'>₹{{ tier.base_price|floatformat:0 }}</p>
                            </div>
                        </div>
                        {% if tier.status == 'upgrade' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-md transform hover:-translate-y-0.5'>Upgrade Now</a>
                        {% elif tier.status == 'purchase' or tier.status == 'login' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md transform hover:-translate-y-0.5'>Choose Plan</a>
                        {% endif %}
                    </div>
                    {% empty %}
                    <p class='text-slate-400 text-center py-4'>No plans available</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Half-Yearly -->
            <div class='bg-white dark:bg-slate-800 rounded-3xl shadow-xl border-2 border-primary dark:border-blue-600/50 overflow-hidden hover:shadow-2xl transition-all transform hover:scale-105 h-full flex flex-col relative z-10'>
                <div class='absolute top-0 right-0 bg-yellow-400 text-dark text-xs font-bold px-3 py-1 rounded-bl-lg shadow-md z-20'>POPULAR</div>
                <div class='bg-gradient-to-r from-primary to-blue-600 p-6 text-white text-center'>
                    <h3 class='text-2xl font-bold'>6 Months</h3>
                    <p class='text-blue-100 text-sm mt-1'>Best Value</p>
                </div>
                <div class='p-6 space-y-4 flex-grow'>
                    {% for tier in half_yearly_tiers %}
                    <div class='p-4 rounded-xl border transition-colors {% if tier.status == 'active' %}bg-green-50 dark:bg-green-900/20 border-green-500 ring-2 ring-green-500/20{% else %}bg-blue-50 dark:bg-blue-900/20 border-primary/30 dark:border-blue-500/30 hover:border-primary{% endif %}'>
                        <div class='flex justify-between items-center'>
                            <div>
                                <p class='font-bold text-xl text-dark dark:text-white'>{{ tier.display_duration }}</p>
                                {% if tier.status == 'active' %}
                                <span class='inline-block px-2 py-1 mt-1 text-xs font-bold text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-300 rounded'>Active</span>
                                {% endif %}
                            </div>
                            <div class='text-right'>
                                <p class='text-3xl font-black text-primary'>₹{{ tier.base_price|floatformat:0 }}</p>
                            </div>
                        </div>
                        {% if tier.status == 'upgrade' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-md transform hover:-translate-y-0.5'>Upgrade Now</a>
                        {% elif tier.status == 'purchase' or tier.status == 'login' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-primary to-blue-600 text-white font-bold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-md transform hover:-translate-y-0.5'>Choose Plan</a>
                        {% endif %}
                    </div>
                    {% empty %}
                    <p class='text-slate-400 text-center py-4'>No plans available</p>
                    {% endfor %}
                </div>
            </div>

            <!-- Yearly -->
            <div class='bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden hover:shadow-2xl transition-all h-full flex flex-col'>
                <div class='bg-gradient-to-r from-secondary to-green-600 p-6 text-white text-center'>
                    <h3 class='text-2xl font-bold'>1 Year</h3>
                    <p class='text-green-100 text-sm mt-1'>Long Term Access</p>
                </div>
                <div class='p-6 space-y-4 flex-grow'>
                    {% for tier in yearly_tiers %}
                    <div class='p-4 rounded-xl border transition-colors {% if tier.status == 'active' %}bg-green-50 dark:bg-green-900/20 border-green-500 ring-2 ring-green-500/20{% else %}bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600 hover:border-secondary{% endif %}'>
                        <div class='flex justify-between items-center'>
                            <div>
                                <p class='font-bold text-xl text-dark dark:text-white'>{{ tier.display_duration }}</p>
                                {% if tier.status == 'active' %}
                                <span class='inline-block px-2 py-1 mt-1 text-xs font-bold text-green-700 bg-green-100 dark:bg-green-900/30 dark:text-green-300 rounded'>Active</span>
                                {% endif %}
                            </div>
                            <div class='text-right'>
                                <p class='text-3xl font-black text-secondary'>₹{{ tier.base_price|floatformat:0 }}</p>
                            </div>
                        </div>
                        {% if tier.status == 'upgrade' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-md transform hover:-translate-y-0.5'>Upgrade Now</a>
                        {% elif tier.status == 'purchase' or tier.status == 'login' %}
                        <a href='{% url 'users:purchase_membership' tier.id %}' class='block mt-4 text-center py-3 px-4 bg-gradient-to-r from-secondary to-green-600 text-white font-bold rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-md transform hover:-translate-y-0.5'>Choose Plan</a>
                        {% endif %}
                    </div>
                    {% empty %}
                    <p class='text-slate-400 text-center py-4'>No plans available</p>
                    {% endfor %}
                </div>
            </div>

        </div>

        <!-- Benefits Section -->
        <div class='bg-white/80 dark:bg-slate-800 backdrop-blur-xl rounded-3xl shadow-xl border border-white dark:border-slate-700 p-8 mb-8 fade-in-up'>
            <h3 class='text-2xl font-bold text-dark dark:text-white mb-6 text-center'>Membership Benefits</h3>
            <div class='grid grid-cols-1 md:grid-cols-3 gap-6'>
                <div class='flex items-start gap-3'>
                    <div class='w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center flex-shrink-0'>
                        <svg class='w-6 h-6 text-primary' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 13l4 4L19 7'></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class='font-bold text-lg text-dark dark:text-white'>Unlimited Bookings</h4>
                        <p class='text-sm text-slate-500 dark:text-slate-400 mt-1'>Book as many slots as you want during your membership period</p>
                    </div>
                </div>
                <div class='flex items-start gap-3'>
                    <div class='w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center flex-shrink-0'>
                        <svg class='w-6 h-6 text-primary' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z'></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class='font-bold text-lg text-dark dark:text-white'>Exclusive Discounts</h4>
                        <p class='text-sm text-slate-500 dark:text-slate-400 mt-1'>Get category-based discounts on all facility bookings</p>
                    </div>
                </div>
                <div class='flex items-start gap-3'>
                    <div class='w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center flex-shrink-0'>
                        <svg class='w-6 h-6 text-primary' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 10V3L4 14h7v7l9-11h-7z'></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class='font-bold text-lg text-dark dark:text-white'>Instant Approval</h4>
                        <p class='text-sm text-slate-500 dark:text-slate-400 mt-1'>Skip the wait - all bookings are instantly confirmed</p>
                    </div>
                </div>
            </div>
        </div>

        <div class='mt-8 text-center text-sm text-slate-400 fade-in-up'>
            * Memberships are non-refundable and non-transferable. Valid ID required at facility entry.
        </div>
    </div>
</div>
{% endblock %}
