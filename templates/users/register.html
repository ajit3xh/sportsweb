{% extends 'base.html' %}

{% block content %}
<div class="min-h-[80vh] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative">
    <!-- Decorative items -->
    <div
        class="absolute top-0 left-0 w-96 h-96 bg-primary/10 rounded-full blur-3xl -z-10 -translate-x-1/2 -translate-y-1/2">
    </div>
    <div
        class="absolute bottom-0 right-0 w-96 h-96 bg-secondary/10 rounded-full blur-3xl -z-10 translate-x-1/2 translate-y-1/2">
    </div>

    <div
        class="max-w-xl w-full space-y-8 bg-white/80 backdrop-blur-xl p-10 rounded-3xl border border-white shadow-2xl fade-in-up">
        <div class="text-center">
            <h2 class="text-4xl font-extrabold text-dark tracking-tight">Create Account</h2>
            <p class="mt-2 text-sm text-slate-500">Join the community and start booking today.</p>
        </div>

        <form method="post" enctype="multipart/form-data" class="space-y-6 mt-8">
            {% csrf_token %}

            <div class="grid grid-cols-1 gap-6">
                {% for field in form %}
                <div>
                    <label class="block text-sm font-bold text-slate-700 mb-2">{{ field.label }}</label>

                    <!-- Render field manually or force class if widget doesn't accept attrs easily -->
                    <!-- Simpler approach: Use the field but we need to ensure it has tailwind classes. 
                         Since we can't easily injection widget attrs in template without custom tags, 
                         we will wrap it or rely on a JS helper if needed, BUT best is to render it manually if modelform.
                         However, for speed, let's use a small script to inject classes OR assumes `styles.css` inputs work.
                         My `styles.css` targets `.form-control` but Django default doesn't add classes.
                         I will wrap in a div and use a script to add classes, OR assume I can add widget tweaks in View. 
                         Let's use the SCript approach I used in login.html? No, login used manual input tags.
                         Here form is dynamic. I will use a JS snippet to stylize the inputs.
                    -->
                    <div class="tailwind-input-wrapper">
                        {{ field }}
                    </div>

                    {% if field.help_text %}
                    <p class="mt-1 text-xs text-slate-500 font-medium">{{ field.help_text }}</p>
                    {% endif %}
                    {% if field.errors %}
                    <p class="mt-1 text-sm text-red-500">{{ field.errors.0 }}</p>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

            <div class="pt-4">
                <button type="submit"
                    class="w-full flex justify-center py-4 px-4 border border-transparent text-lg font-bold rounded-xl text-white bg-gradient-to-r from-primary to-blue-600 hover:to-blue-700 shadow-xl shadow-blue-500/30 transition-all hover:scale-[1.02]">
                    Complete Registration
                </button>
            </div>
        </form>

        <div class="text-center mt-6">
            <p class="text-sm text-slate-500">
                Already have an account?
                <a href="{% url 'users:login' %}" class="font-bold text-primary hover:text-blue-700">Log in</a>
            </p>
        </div>
    </div>
</div>

<script>
    // Apply Tailwind classes to Django form inputs
    document.addEventListener('DOMContentLoaded', () => {
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            if (input.type !== 'checkbox' && input.type !== 'radio') {
                input.className = 'appearance-none block w-full px-4 py-3 border border-slate-300 rounded-xl placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all shadow-sm bg-slate-50 text-dark';
            } else {
                input.className = 'w-4 h-4 text-primary border-slate-300 focus:ring-primary rounded';
            }
        });
    });
</script>
{% endblock %}